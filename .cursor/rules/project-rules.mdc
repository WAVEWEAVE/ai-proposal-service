# 1인기업 제안서 서비스 개발 규칙

## 📋 프로젝트 개요

1인 기업을 위한 제안서 작성 및 관리 서비스를 개발합니다.
사용자 경험을 최우선으로 하며, 안정적이고 직관적인 웹 애플리케이션을 목표로 합니다.

---

## 🎯 프로젝트 특성

### 1. 기본 원칙
- **Next.js 15 App Router 기반**의 모던 웹 애플리케이션
- **사용자 경험 최우선**: 모든 상호작용에 대한 즉각적인 피드백 제공
- **오류 처리 철저**: 예외 상황에 대한 명확한 안내

### 2. UI/UX 필수 요소
반드시 다음 상태들을 모두 구현해야 합니다:

- ✅ **로딩 상태**: Skeleton, Spinner 등을 활용한 로딩 UI
- ✅ **빈 상태**: 데이터가 없을 때의 Empty State UI
- ✅ **오류 상태**: 에러 발생 시 사용자 친화적인 안내 메시지
- ✅ **상호작용 지연 최소화**: Optimistic UI, Debounce 등 활용

### 3. 오류 처리 전략

#### 서버 컴포넌트
```typescript
try {
  // 서버 작업
} catch (error) {
  console.error('[상세 에러 로그]', error);
  throw new Error('사용자에게 보여줄 한글 메시지');
}
```

#### 클라이언트 컴포넌트
```typescript
try {
  // 클라이언트 작업
} catch (error) {
  console.error('[상세 에러 로그]', error);
  toast.error('사용자에게 보여줄 한글 메시지');
}
```

#### 원칙
- **개발 환경**: 상세한 에러 로그를 콘솔에 출력
- **프로덕션**: 사용자에게는 한글로 친절한 메시지만 표시
- **에러 경계**: 각 주요 섹션에 Error Boundary 설정

---

## 🛠 기술 스택

### Core
- **Next.js 15** (App Router)
- **TypeScript** (strict mode 권장)
- **React 19**

### Styling
- **Tailwind CSS** (유틸리티 기반 스타일링)
- **Shadcn/ui** (재사용 가능한 UI 컴포넌트)

### Backend & Services
- **Supabase** (Authentication, Database, Storage)
- **AI SDK** (AI 모델 연동)

### Code Quality
- **ESLint** (Next.js/TypeScript 규칙 기반)
- **Prettier** (코드 포맷팅)

---

## 📝 코딩 스타일 가이드

### 1. 컴포넌트 작성

#### 기본 규칙
- **함수형 컴포넌트**를 기본으로 사용
- **화살표 함수**로 모든 함수 작성
- **파스칼 케이스**로 컴포넌트 파일명 작성 (예: `ProposalCard.tsx`)

#### 컴포넌트 예시
```typescript
/**
 * 제안서 카드 컴포넌트
 * 제안서 목록에서 개별 제안서 정보를 표시합니다.
 * 
 * @param proposal - 제안서 데이터 객체
 * @param onEdit - 수정 버튼 클릭 핸들러
 * @param onDelete - 삭제 버튼 클릭 핸들러
 */
export const ProposalCard: React.FC<ProposalCardProps> = ({ 
  proposal, 
  onEdit, 
  onDelete 
}) => {
  // 컴포넌트 로직
  return (
    <div className="card">
      {/* UI 구현 */}
    </div>
  );
};
```

### 2. 함수 작성

```typescript
/**
 * 제안서 데이터를 가져오는 함수
 * Supabase에서 사용자의 제안서 목록을 조회합니다.
 * 
 * @param userId - 사용자 ID
 * @returns 제안서 배열
 */
const fetchProposals = async (userId: string): Promise<Proposal[]> => {
  try {
    const { data, error } = await supabase
      .from('proposals')
      .select('*')
      .eq('user_id', userId);
    
    if (error) throw error;
    return data;
  } catch (error) {
    console.error('[제안서 조회 실패]', error);
    throw new Error('제안서를 불러오는데 실패했습니다.');
  }
};
```

### 3. 주석 규칙

#### 필수 주석
- **파일 상단**: 파일의 목적 설명
- **컴포넌트/함수 상단**: JSDoc 형식의 한글 주석
- **복잡한 로직**: 인라인 주석으로 설명

#### 예시
```typescript
// ✅ 좋은 예시
/**
 * 사용자 인증 상태를 확인하고 리다이렉트를 처리합니다.
 * 로그인하지 않은 사용자는 로그인 페이지로 이동시킵니다.
 */
const checkAuth = async () => {
  // 세션 정보 확인
  const session = await getSession();
  
  if (!session) {
    // 로그인 페이지로 리다이렉트
    redirect('/login');
  }
};

// ❌ 나쁜 예시
// check authentication
const checkAuth = async () => {
  const session = await getSession();
  if (!session) redirect('/login');
};
```

### 4. 네이밍 컨벤션

#### 파일명
- **컴포넌트**: `PascalCase.tsx` (예: `ProposalList.tsx`)
- **유틸리티**: `camelCase.ts` (예: `formatDate.ts`)
- **타입 정의**: `types.ts` 또는 `*.types.ts`
- **훅**: `use-*.ts` (예: `use-proposals.ts`)

#### 변수/함수명
- **컴포넌트**: `PascalCase`
- **함수/변수**: `camelCase`
- **상수**: `UPPER_SNAKE_CASE`
- **타입/인터페이스**: `PascalCase`

```typescript
// 상수
const MAX_PROPOSAL_TITLE_LENGTH = 100;

// 타입
interface ProposalFormData {
  title: string;
  content: string;
}

// 컴포넌트
const ProposalForm: React.FC = () => {
  // 상태
  const [isLoading, setIsLoading] = useState(false);
  
  // 함수
  const handleSubmit = async (data: ProposalFormData) => {
    // 로직
  };
};
```

---

## 📁 프로젝트 구조

```
proposal-service/
├── app/                          # App Router 페이지
│   ├── (auth)/                  # 인증 관련 페이지 그룹
│   │   ├── login/
│   │   └── signup/
│   ├── (dashboard)/             # 대시보드 페이지 그룹
│   │   ├── proposals/
│   │   └── settings/
│   ├── layout.tsx               # 루트 레이아웃
│   └── page.tsx                 # 홈 페이지
├── components/                   # 재사용 컴포넌트
│   ├── ui/                      # Shadcn/ui 컴포넌트
│   ├── features/                # 기능별 컴포넌트
│   └── layouts/                 # 레이아웃 컴포넌트
├── lib/                         # 유틸리티 & 설정
│   ├── supabase/               # Supabase 클라이언트
│   ├── ai/                     # AI SDK 설정
│   └── utils.ts                # 공통 유틸리티
├── hooks/                       # 커스텀 훅
├── types/                       # TypeScript 타입 정의
└── public/                      # 정적 파일
```

---

## ✅ ESLint 규칙

### 필수 준수 사항
- **타입 안정성**: `any` 타입 사용 금지 (불가피한 경우 주석으로 이유 명시)
- **미사용 변수**: 사용하지 않는 변수/import 제거
- **일관된 따옴표**: 작은따옴표(') 사용
- **세미콜론**: 문장 끝에 세미콜론 필수
- **화살표 함수**: 모든 함수는 화살표 함수로 작성

### ESLint 실행
```bash
# 검사
npm run lint

# 자동 수정
npm run lint -- --fix
```

---

## 🎨 스타일링 가이드

### Tailwind CSS 사용 원칙
1. **유틸리티 우선**: 가능한 Tailwind 클래스 활용
2. **반응형 디자인**: 모바일 퍼스트 접근
3. **다크모드 지원**: `dark:` prefix 활용
4. **일관된 간격**: Tailwind spacing scale 준수

```typescript
// ✅ 좋은 예시
<div className="flex flex-col gap-4 p-6 bg-white dark:bg-gray-900 rounded-lg shadow-md">
  <h2 className="text-2xl font-bold text-gray-900 dark:text-white">제목</h2>
  <p className="text-gray-600 dark:text-gray-300">내용</p>
</div>

// ❌ 나쁜 예시 (인라인 스타일)
<div style={{ display: 'flex', padding: '24px' }}>
  <h2 style={{ fontSize: '24px' }}>제목</h2>
</div>
```

### Shadcn/ui 컴포넌트 활용
- 기본 제공 컴포넌트 최대한 활용
- 커스터마이징 필요 시 `components/ui/` 에서 수정
- 새로운 variant가 필요한 경우 기존 패턴 따르기

---

## 🔐 보안 & 환경변수

### 환경변수 관리
```bash
# .env.local
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
AI_API_KEY=your-ai-api-key
```

### 원칙
- **클라이언트 노출**: `NEXT_PUBLIC_` prefix만 사용
- **민감 정보**: 서버 컴포넌트/API 라우트에서만 접근
- **커밋 금지**: `.env.local`은 절대 커밋하지 않음
- **예시 파일**: `.env.example` 제공

---

## 🧪 테스트 전략

### 수동 테스트 체크리스트
각 기능 구현 후 반드시 확인:

- [ ] 로딩 상태가 올바르게 표시되는가?
- [ ] 빈 데이터 상태가 처리되는가?
- [ ] 에러 상황에서 적절한 메시지가 표시되는가?
- [ ] 모바일/태블릿에서 정상 동작하는가?
- [ ] 다크모드에서 UI가 정상인가?

---

## 📚 참고 문서

- [Next.js 15 공식 문서](https://nextjs.org/docs)
- [Tailwind CSS 문서](https://tailwindcss.com/docs)
- [Shadcn/ui 문서](https://ui.shadcn.com)
- [Supabase 문서](https://supabase.com/docs)
- [TypeScript 핸드북](https://www.typescriptlang.org/docs)

---

## 🚀 개발 시작하기

```bash
# 개발 서버 실행
npm run dev

# 빌드
npm run build

# 프로덕션 실행
npm start

# 린트 검사
npm run lint

# 타입 체크
npx tsc --noEmit
```

---

**마지막 업데이트**: 2026-01-23  
**문서 버전**: 1.0.0
